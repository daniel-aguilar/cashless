import{a as v}from"./chunk-TLJZRMGB.js";import{a as $,b}from"./chunk-WR5FJPFY.js";import{c as O,e as Y,f as x,g as I}from"./chunk-EAZJMQMR.js";import{Aa as p,B as L,Ba as d,Ca as P,Da as g,Fa as t,Ga as n,Hb as R,L as s,Qa as _,Qb as G,Sa as A,ba as a,db as f,eb as r,fb as u,gb as S,ia as T,kb as E,lb as C,mb as N,ub as h,za as c}from"./chunk-YAEFWQCE.js";function X(i,o){i&1&&(t(0,"mat-icon"),r(1,"arrow_downward"),n());}function k(i,o){i&1&&(t(0,"mat-icon"),r(1,"arrow_upward"),n());}function z(i,o){if(i&1&&(t(0,"tr")(1,"td"),r(2),E(3,"date"),n(),t(4,"td"),c(5,X,2,0,"mat-icon")(6,k,2,0,"mat-icon"),n(),t(7,"td"),r(8),E(9,"localizeName"),n(),t(10,"td"),r(11),n()()),i&2){let e=o.$implicit;a(2),u(N(3,6,e.tx.date,"h:mm a")),a(2),f(e.isIncoming?"incoming":"outgoing"),a(),p(e.isIncoming?5:6),a(3),u(C(9,9,e.account.name)),a(3),S("$",e.tx.amount);}}function B(i,o){i&1&&(t(0,"td"),r(1,"-"),n());}function D(i,o){if(i&1&&(t(0,"tr"),P(1,B,2,0,"td",null,d),n()),i&2){let e=A();a(),g(e.emptyLines);}}var w=class i{emptyLines=[...Array(4).keys()];payments=[];balanceChange=h();currentPayments;currentPlayer=s(b);bank=s($);get player(){return this.currentPlayer.account;}ngOnInit(){let o=this.bank.getLatestPayments(this.player);this.currentPayments=o.pipe(L(e=>(this.payments=e,this.bank.getPayments(this.player)))).subscribe(e=>this.addToLog(e));}ngOnDestroy(){this.currentPayments.unsubscribe();}addToLog(o){this.payments.unshift(o),this.balanceChange.emit(),this.payments.length>3&&this.payments.pop();}static ɵfac=function(e){return new(e||i)();};static ɵcmp=T({type:i,selectors:[["app-payment-log"]],outputs:{balanceChange:"balanceChange"},decls:19,vars:1,consts:()=>{let o;o="Hora";let e;e="Tipo";let l;l="Cuenta";let y;y="Monto";let M;return M="Ver Bit\xE1cora de Transacciones",[o,e,l,y,M,[1,"mx-auto","my-1"],[1,"flex","justify-center"],["mat-button","","routerLink","/transactions",1,"mb-1"]];},template:function(e,l){e&1&&(t(0,"table",5)(1,"thead")(2,"tr")(3,"th"),_(4,0),n(),t(5,"th"),_(6,1),n(),t(7,"th"),_(8,2),n(),t(9,"th"),_(10,3),n()()(),t(11,"tbody"),P(12,z,12,11,"tr",null,d),c(14,D,3,0,"tr"),n()(),t(15,"div",6)(16,"a",7)(17,"span"),_(18,4),n()()()),e&2&&(a(12),g(l.payments),a(2),p(l.payments.length===0?14:-1));},dependencies:[I,x,Y,O,G,R,v],styles:["table[_ngcontent-%COMP%]{border-collapse:collapse;font-size:medium}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:center;border-width:1px;border-style:solid}a[_ngcontent-%COMP%]{width:fit-content}"]});};export{w as PaymentLog};/**i18n:25b89f45ee840fc142fbaadd4b394e1385b7cda733c0e9935fff2d7a933a6b20*/