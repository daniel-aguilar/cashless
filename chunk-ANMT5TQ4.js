import{a as v}from"./chunk-FMZ3Y6F2.js";import{a as x,b as I}from"./chunk-LJVOMQQW.js";import{c as $,e as b,f as R,g as Y}from"./chunk-JGNJX2SC.js";import{C as A,Ca as s,Da as p,Ea as d,Fa as u,Ga as g,Hb as h,Ia as t,Ja as n,M as c,Qb as G,Ta as _,Va as E,fa as a,gb as y,hb as r,ib as T,jb as L,mb as P,na as f,nb as S,ob as N,ub as O}from"./chunk-JBGOK2XV.js";function U(i,o){i&1&&(t(0,"mat-icon"),r(1,"arrow_downward"),n());}function X(i,o){i&1&&(t(0,"mat-icon"),r(1,"arrow_upward"),n());}function k(i,o){if(i&1&&(t(0,"tr")(1,"td"),r(2),P(3,"date"),n(),t(4,"td"),s(5,U,2,0,"mat-icon")(6,X,2,0,"mat-icon"),n(),t(7,"td"),r(8),P(9,"localizeName"),n(),t(10,"td"),r(11),n()()),i&2){let e=o.$implicit;a(2),T(N(3,6,e.tx.date,"h:mm a")),a(2),y(e.isIncoming?"incoming":"outgoing"),a(),p(e.isIncoming?5:6),a(3),T(S(9,9,e.account.name)),a(3),L("$",e.tx.amount);}}function z(i,o){i&1&&(t(0,"td"),r(1,"-"),n());}function B(i,o){if(i&1&&(t(0,"tr"),u(1,z,2,0,"td",null,d),n()),i&2){let e=E();a(),g(e.emptyLines);}}var w=class i{emptyLines=[...Array(4).keys()];payments=[];balanceChange=O();currentPayments;currentAccount=c(I);bank=c(x);get account(){return this.currentAccount.instance;}ngOnInit(){let o=this.bank.getLatestPayments(this.account);this.currentPayments=o.pipe(A(e=>(this.payments=e,this.bank.getPayments(this.account)))).subscribe(e=>this.addToLog(e));}ngOnDestroy(){this.currentPayments.unsubscribe();}addToLog(o){this.payments.unshift(o),this.balanceChange.emit(),this.payments.length>3&&this.payments.pop();}static ɵfac=function(e){return new(e||i)();};static ɵcmp=f({type:i,selectors:[["app-payment-log"]],outputs:{balanceChange:"balanceChange"},decls:19,vars:1,consts:()=>{let o;o="Hora";let e;e="Tipo";let m;m="Cuenta";let C;C="Monto";let M;return M="Ver Bit\xE1cora de Transacciones",[o,e,m,C,M,[1,"mx-auto","my-1"],[1,"flex","justify-center"],["mat-button","","routerLink","/transactions",1,"mb-1"]];},template:function(e,m){e&1&&(t(0,"table",5)(1,"thead")(2,"tr")(3,"th"),_(4,0),n(),t(5,"th"),_(6,1),n(),t(7,"th"),_(8,2),n(),t(9,"th"),_(10,3),n()()(),t(11,"tbody"),u(12,k,12,11,"tr",null,d),s(14,B,3,0,"tr"),n()(),t(15,"div",6)(16,"a",7)(17,"span"),_(18,4),n()()()),e&2&&(a(12),g(m.payments),a(2),p(m.payments.length===0?14:-1));},dependencies:[Y,R,b,$,G,h,v],styles:["table[_ngcontent-%COMP%]{border-collapse:collapse;font-size:medium}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:center;border-width:1px;border-style:solid}a[_ngcontent-%COMP%]{width:fit-content}"]});};export{w as PaymentLog};/**i18n:fb9d54545e1b3fb5954c4f7db1559950d48bb1c5d817f9bda84995f8304b645d*/